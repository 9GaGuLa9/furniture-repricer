# Furniture Repricer - Configuration File
#
# USING ConfigManager:
# - This file contains DEFAULTS
# - Google Sheets “Config” can override any settings
# - Priority: Google Sheets > config.yaml > hardcoded defaults

# GOOGLE SHEETS
google_sheets:
  credentials_file: "credentials/service_account.json"

# Google API Configuration (for error logging and other integrations)
google:
  service_account_path: "credentials/service_account.json"

# Main sheet configuration
main_sheet:
  id: "1MVUjRr6295RLsM8m_lHjKRZ_mIyalcLPVWTNos1oOM4"
  name: "Data"

# SYSTEM
run_enabled: true              # Autostart (TRUE/FALSE)
test_mode: false               # Test mode without real changes
dry_run: false                 # Show what will be done without execution
log_level: "INFO"              # DEBUG/INFO/WARNING/ERROR
verbose_logging: false         # Detailed logging for debugging

# SCRAPERS CONTROL
scraper_emmamason: true        # Scraping Emma Mason
scraper_coleman: true          # Scraping Coleman Furniture
scraper_onestopbedrooms: true  # Scraping 1StopBedrooms
scraper_afastores: true        # Scraping AFA Stores

# Future competitors (not implemented yet)
site4_enabled: false           # Site 4 scraper
site5_enabled: false           # Site 5 scraper

# SCRAPING LIMITS
max_products_emmamason: 50000          # Maximum products from Emma Mason (100-10000)
max_products_per_competitor: 50000     # Maximum number of products from each competitor (50-5000)
scraping_timeout_minutes: 300          # Scraping timeout in minutes (10-300)

# EMMA MASON SPECIFIC
emmamason_max_retries: 3       # Maximum number of retries for errors (1-10)

# PRICING RULES
enable_price_updates: true             # Should prices be updated at all?
update_only_with_competitors: false    # Update only if there are competitors
min_price_change_percent: 0.5          # Minimum price change for update in % (0-100)
max_price_change_percent: 20           # Maximum price change per transaction in % (1-100)

# Price calculation rules (can override from Google Sheets “Price_rules”)
price_rules:
  floor_rate: 1.5              # Min price = Our Cost * 1.5
  below_competitor: 1.0        # $1 lower than the competitor
  max_rate: 2.0                # Maximum price = Our Cost * 2.0

# DATA & HISTORY
enable_price_history: true             # Record the history of price changes
enable_competitors_sheet: true         # Update Competitors sheet
save_scraping_errors: true             # Store scraping errors

# VALIDATION
validate_prices_range: false   # Check price range
min_valid_price: 10            # Minimum valid price in $ (1-1000)
max_valid_price: 50000         # Maximum valid price in $ (100-100000)
reject_zero_prices: true       # Reject zero prices

# PERFORMANCE
batch_size_sheets_update: 500  # Batch size for Google Sheets (100-1000)
max_concurrent_requests: 5     # Maximum number of parallel requests (1-20)
retry_on_rate_limit: true      # Repeat at rate limit
rate_limit_delay_seconds: 60   # Delay at rate limit in seconds (30-300)

# SCHEDULE
schedule_enabled: true                # Enable autostart schedule
schedule_times: "06:00,16:00,21:00"    # Start time in hours and minutes (HH:MM,HH:MM)
schedule_timezone: "America/New_York"  # Time zone

# NOTIFICATIONS
telegram_enabled: false        # Send Telegram messages
telegram_on_errors_only: false # Only in case of errors
telegram_chat_id: ""           # Telegram chat ID (numeric value)
telegram_bot_token: ""         # Bot token (from environment or here)

# TESTING & DEBUG
test_sample_size: 100          # Number of items for testing (10-1000)

# SCRAPERS (detailed settings)
scrapers:
  emmamason:
    enabled: true
    delay_min: 2.0
    delay_max: 5.0
    retry_attempts: 3
    timeout: 45
  
  coleman:
    enabled: true
    delay_min: 0.5
    delay_max: 1.5
    retry_attempts: 3
    timeout: 20
  
  onestopbedrooms:
    enabled: true
    delay_min: 1.0
    delay_max: 3.0
    retry_attempts: 3
    timeout: 20
  
  afa:
    enabled: true
    delay_min: 3.0
    delay_max: 7.0
    retry_attempts: 2
    timeout: 30

# SKU MATCHING
sku_matching:
  split_delimiter: ";"     # Separator for multiple SKUs
  case_sensitive: false    # Case sensitivity
  strategy: "exact"        # “exact” or “fuzzy” (fuzzy - similarity SKU)
  fuzzy_threshold: 0.85    # Threshold for fuzzy matching (0-1)

# LOGGING
logging:
  level: "INFO"            # DEBUG/INFO/WARNING/ERROR
  directory: "logs"
  format: "%(asctime)s | %(name)-15s | %(levelname)-8s | %(funcName)-20s | %(message)s"
  date_format: "%Y-%m-%d %H:%M:%S"
  retention_days: 10         # Keep logs for n days
  rotate_daily: true         # Daily file rotation
  max_file_size_mb: 100      # Maximum log file size (MB)

# Google Sheets error loggin
error_logging:
  # Enable error logging to Google Sheets
  enabled: true
  
  # Auto-cleanup settings
  # How many days to keep errors in Google Sheets
  retention_days: 10
  
  # Run cleanup when ErrorLogger is initialized (recommended)
  # This will delete errors older than retention_days
  cleanup_on_start: true
  
  # Run cleanup after EVERY error is logged (NOT recommended - slow!)
  # Better to use cleanup_on_start for daily cleanup
  auto_cleanup: false
